{% extends "base.html" %}

{% block content %}

<div class="form-box">

    <!-- Title based on form type -->
    {% if form_type == 'crop' %}
        <h3 class="text-center">Add New Crop Listing</h3>
        <form method="POST" action="{{ url_for('farmer.add_crop') }}" enctype="multipart/form-data">
    {% elif form_type == 'demand' %}
        <h3 class="text-center">ðŸ›’ Post a New Demand</h3>
        <form method="POST" action="{{ url_for('buyer.add_demand') }}" enctype="multipart/form-data">
    {% endif %}

    <!-- Crop Name (Common) -->
    <div class="mb-3">
        <label class="form-label">Crop Name</label>
        <select name="crop_name" class="form-control" required>
            <option value="">Select a Crop</option>
            <option value="Maize">Maize</option>
            <option value="Tobacco">Tobacco</option>
            <option value="Tea">Tea</option>
            <option value="Sugar (Sugarcane)">Sugar (Sugarcane)</option>
            <option value="Cotton">Cotton</option>
            <option value="Groundnuts (Peanuts)">Groundnuts (Peanuts)</option>
            <option value="Cassava">Cassava</option>
            <option value="Sweet Potatoes">Sweet Potatoes</option>
            <option value="Rice">Rice</option>
            <option value="Sorghum">Sorghum</option>
            <option value="Millet">Millet</option>
            <option value="Irish Potatoes">Irish Potatoes</option>
            <option value="Beans">Beans</option>
            <option value="Pigeon Peas">Pigeon Peas</option>
            <option value="Cowpeas">Cowpeas</option>
            <option value="Soybeans">Soybeans</option>
            <option value="Coffee">Coffee</option>
            <option value="Macadamia Nuts">Macadamia Nuts</option>
            <option value="Sunflower">Sunflower</option>
            <option value="Mangoes">Mangoes</option>
            <option value="Pawpaws (Papayas)">Pawpaws (Papayas)</option>
            <option value="Bananas">Bananas</option>
            <option value="Oranges">Oranges</option>
            <option value="Pineapples">Pineapples</option>
            <option value="Cabbage">Cabbage</option>
            <option value="Tomatoes">Tomatoes</option>
            <option value="Onions">Onions</option>
            <option value="Rape (Leafy Vegetable)">Rape (Leafy Vegetable)</option>
            <option value="Okra">Okra</option>
            <option value="Pumpkin">Pumpkin</option>
            <option value="Wheat">Wheat</option>
            <option value="Yams">Yams</option>
            <option value="Tung">Tung</option>
            <option value="Cashew-nut">Cashew-nut</option>
            <option value="Coconut">Coconut</option>
            <option value="Guava">Guava</option>
            <option value="Avocadoes">Avocadoes</option>
            <option value="Peaches">Peaches</option>
            <option value="Pears">Pears</option>
            <option value="Plums">Plums</option>
            <option value="Granadilla (Passion Fruit)">Granadilla (Passion Fruit)</option>
        </select>
    </div>

    <!-- Quantity (Common) -->
    <div class="mb-3">
        <label class="form-label">Quantity Needed</label>
        <input type="text" name="quantity" class="form-control" placeholder="e.g., 500 kg, 10 Tonnes" required>
    </div>

    <!-- CROP-SPECIFIC FIELDS -->
    {% if form_type == 'crop' %}
        <div class="mb-3">
            <label class="form-label">Price (MWK per Unit)</label>
            <input type="number" step="0.01" name="price" class="form-control" placeholder="e.g., 150.00" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Quality</label>
            <select name="quality" class="form-control" required>
                <option value="">Select Quality</option>
                <option value="Grade A">Grade A</option>
                <option value="Grade B">Grade B</option>
                <option value="Grade C">Grade C</option>
                <option value="Organic">Organic</option>
                <option value="Conventional">Conventional</option>
                <option value="Premium">Premium</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Crop Grade</label>
            <select name="crop_grade" class="form-control" required>
                <option value="">Select Grade</option>
                <option value="A1 (Highest)">A1 (Highest)</option>
                <option value="B2 (Medium)">B2 (Medium)</option>
                <option value="C3 (Standard)">C3 (Standard)</option>
                <option value="Feed Grade">Feed Grade</option>
                <option value="Not Graded">Not Graded</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Harvest Date</label>
            <input type="date" name="harvest_date" class="form-control" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Location (District)</label>
            <select name="location" class="form-control" required>
                <option value="">Select District</option>
                <option value="Balaka">Balaka</option>
                <option value="Blantyre">Blantyre</option>
                <option value="Chikwawa">Chikwawa</option>
                <option value="Chiradzulu">Chiradzulu</option>
                <option value="Chitipa">Chitipa</option>
                <option value="Dedza">Dedza</option>
                <option value="Dowa">Dowa</option>
                <option value="Karonga">Karonga</option>
                <option value="Kasungu">Kasungu</option>
                <option value="Likoma">Likoma</option>
                <option value="Lilongwe">Lilongwe</option>
                <option value="Machinga">Machinga</option>
                <option value="Mangochi">Mangochi</option>
                <option value="Mchinji">Mchinji</option>
                <option value="Mulanje">Mulanje</option>
                <option value="Mwanza">Mwanza</option>
                <option value="Mzimba">Mzimba</option>
                <option value="Neno">Neno</option>
                <option value="Nkhotakota">Nkhotakota</option>
                <option value="Nsanje">Nsanje</option>
                <option value="Ntcheu">Ntcheu</option>
                <option value="Ntchisi">Ntchisi</option>
                <option value="Phalombe">Phalombe</option>
                <option value="Rumphi">Rumphi</option>
                <option value="Salima">Salima</option>
                <option value="Thyolo">Thyolo</option>
                <option value="Zomba">Zomba</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Upload Image (Optional)</label>
            <input type="file" name="image" class="form-control" accept="image/*">
        </div>

    <!-- DEMAND-SPECIFIC FIELDS -->
    {% elif form_type == 'demand' %}
        <div class="mb-3">
            <label class="form-label">Location</label>
            <select name="location" class="form-control" required>
                <option value="">Select District</option>
                <option value="Balaka">Balaka</option>
                <option value="Blantyre">Blantyre</option>
                <option value="Chikwawa">Chikwawa</option>
                <option value="Chiradzulu">Chiradzulu</option>
                <option value="Chitipa">Chitipa</option>
                <option value="Dedza">Dedza</option>
                <option value="Dowa">Dowa</option>
                <option value="Karonga">Karonga</option>
                <option value="Kasungu">Kasungu</option>
                <option value="Likoma">Likoma</option>
                <option value="Lilongwe">Lilongwe</option>
                <option value="Machinga">Machinga</option>
                <option value="Mangochi">Mangochi</option>
                <option value="Mchinji">Mchinji</option>
                <option value="Mulanje">Mulanje</option>
                <option value="Mwanza">Mwanza</option>
                <option value="Mzimba">Mzimba</option>
                <option value="Neno">Neno</option>
                <option value="Nkhotakota">Nkhotakota</option>
                <option value="Nsanje">Nsanje</option>
                <option value="Ntcheu">Ntcheu</option>
                <option value="Ntchisi">Ntchisi</option>
                <option value="Phalombe">Phalombe</option>
                <option value="Rumphi">Rumphi</option>
                <option value="Salima">Salima</option>
                <option value="Thyolo">Thyolo</option>
                <option value="Zomba">Zomba</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Required Quality (Optional)</label>
            <select name="quality" class="form-control">
                <option value="">Select Quality</option>
                <option value="Grade A">Grade A</option>
                <option value="Grade B">Grade B</option>
                <option value="Grade C">Grade C</option>
                <option value="Organic">Organic</option>
                <option value="Conventional">Conventional</option>
                <option value="Premium">Premium</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Additional Message/Notes (Optional)</label>
            <textarea name="message" class="form-control" rows="3" placeholder="Describe your specific needs or requirements..."></textarea>
        </div>

        <div class="mb-3">
            <label class="form-label">Upload Sample Image (Optional)</label>
            <input type="file" name="image" class="form-control" accept="image/*">
        </div>
    {% endif %}

    <button type="submit" class="btn btn-success w-100 mt-3">
        {% if form_type == 'crop' %}Register Crop{% else %}Post Demand{% endif %}
    </button>
    <a href="{% if form_type == 'crop' %}{{ url_for('farmer.dashboard') }}{% else %}{{ url_for('buyer.dashboard') }}{% endif %}" class="btn btn-secondary w-100 mt-2">Cancel</a>
    </form>
</div>
{% endblock %}
